(function(){var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function k(){k=function(){};h.Symbol||(h.Symbol=ba)}var ca=0;function ba(a){return"jscomp_symbol_"+(a||"")+ca++}
function l(){k();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return m(this)}});l=function(){}}function m(a){var b=0;return da(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function da(a){l();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}
function n(a){if(!(a instanceof Array)){l();var b=a[Symbol.iterator];a=b?b.call(a):m(a);for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ea(a,b){function c(){}c.prototype=b.prototype;a.S=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}
var p=window.Element.prototype,q=p.matches||p.matchesSelector||p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector;function r(a,b){if(a&&1==a.nodeType&&b){if("string"==typeof b||1==b.nodeType)return a==b||t(a,b);if("length"in b)for(var c=0,d;d=b[c];c++)if(a==d||t(a,d))return!0}return!1}function t(a,b){if("string"!=typeof b)return!1;if(q)return q.call(a,b);b=a.parentNode.querySelectorAll(b);for(var c=0,d;d=b[c];c++)if(d==a)return!0;return!1}
function fa(a){for(var b=[];a&&a.parentNode&&1==a.parentNode.nodeType;)a=a.parentNode,b.push(a);return b}
function ha(a,b,c){function d(a){var d;if(f.composed&&"function"==typeof a.composedPath)for(var e=a.composedPath(),g=0,v;v=e[g];g++)1==v.nodeType&&r(v,b)&&(d=v);else a:{if((d=a.target)&&1==d.nodeType&&b)for(d=[d].concat(fa(d)),e=0;g=d[e];e++)if(r(g,b)){d=g;break a}d=void 0}d&&c.call(d,a,d)}var e=document,f={composed:!0,B:!0},f=void 0===f?{}:f;e.addEventListener(a,d,f.B);return{h:function(){e.removeEventListener(a,d,f.B)}}}
function ia(a){var b={};if(!a||1!=a.nodeType)return b;a=a.attributes;if(!a.length)return{};for(var c=0,d;d=a[c];c++)b[d.name]=d.value;return b}var u=[];function w(a,b){var c=this;this.context=a;this.v=b;this.f=(this.c=/Task$/.test(b))?a.get(b):a[b];this.b=[];this.a=[];this.i=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return c.a[c.a.length-1].apply(null,[].concat(n(b)))};this.c?a.set(b,this.i):a[b]=this.i}function x(a,b,c){a=y(a,b);a.b.push(c);z(a)}
function A(a,b,c){a=y(a,b);c=a.b.indexOf(c);-1<c&&(a.b.splice(c,1),0<a.b.length?z(a):a.h())}function z(a){a.a=[];for(var b,c=0;b=a.b[c];c++){var d=a.a[c-1]||a.f.bind(a.context);a.a.push(b(d))}}w.prototype.h=function(){var a=u.indexOf(this);-1<a&&(u.splice(a,1),this.c?this.context.set(this.v,this.f):this.context[this.v]=this.f)};function y(a,b){var c=u.filter(function(c){return c.context==a&&c.v==b})[0];c||(c=new w(a,b),u.push(c));return c}
function B(a,b,c,d,e,f){if("function"==typeof d){var g=c.get("buildHitTask");return{buildHitTask:function(c){c.set(a,null,!0);c.set(b,null,!0);d(c,e,f);g(c)}}}return C({},a,b)}function ja(a,b){var c=ia(a),d={};Object.keys(c).forEach(function(a){if(!a.indexOf(b)&&a!=b+"on"){var e=c[a];"true"==e&&(e=!0);"false"==e&&(e=!1);a=ka(a.slice(b.length));d[a]=e}});return d}
function la(a,b){var c;return function(d){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];clearTimeout(c);c=setTimeout(function(){return a.apply(null,[].concat(n(e)))},b)}}var D={};
function ma(a,b){function c(){clearTimeout(e.timeout);e.send&&A(a,"send",e.send);delete D[d];e.A.forEach(function(a){return a()})}var d=a.get("trackingId"),e=D[d]=D[d]||{};clearTimeout(e.timeout);e.timeout=setTimeout(c,0);e.A=e.A||[];e.A.push(b);e.send||(e.send=function(a){return function(b){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];c();a.apply(null,[].concat(n(d)))}},x(a,"send",e.send))}
var C=Object.assign||function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d=0,e=c.length;d<e;d++){var f=Object(c[d]),g;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&(a[g]=f[g])}return a};function ka(a){return a.replace(/[\-\_]+(\w?)/g,function(a,c){return c.toUpperCase()})}function E(a){return"object"==typeof a&&null!==a}var F=function na(b){return b?(b^16*Math.random()>>b/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,na)};
function G(a,b){var c=window.GoogleAnalyticsObject||"ga";window[c]=window[c]||function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];(window[c].q=window[c].q||[]).push(b)};window.gaDevIds=window.gaDevIds||[];0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo");window[c]("provide",a,b);window.gaplugins=window.gaplugins||{};window.gaplugins[a.charAt(0).toUpperCase()+a.slice(1)]=b}var H={K:1,C:2,L:3,D:4,N:5,O:6,F:7,P:8,R:9,M:10},I=Object.keys(H).length;
function J(a,b){a.set("\x26_av","2.4.1");var c=a.get("\x26_au"),c=parseInt(c||"0",16).toString(2);if(c.length<I)for(var d=I-c.length;d;)c="0"+c,d--;b=I-b;c=c.substr(0,b)+1+c.substr(b+1);a.set("\x26_au",parseInt(c||"0",2).toString(16))}
function K(a,b){var c=this;J(a,H.C);if(window.addEventListener){this.a=C({events:["click"],fieldsObj:{},attributePrefix:"ga-"},b);this.f=a;this.c=this.c.bind(this);var d="["+this.a.attributePrefix+"on]";this.b={};this.a.events.forEach(function(a){c.b[a]=ha(a,d,c.c)})}}
K.prototype.c=function(a,b){var c=this.a.attributePrefix;if(!(0>b.getAttribute(c+"on").split(/\s*,\s*/).indexOf(a.type))){var c=ja(b,c),d=C({},this.a.fieldsObj,c);this.f.send(c.hitType||"event",B({transport:"beacon"},d,this.f,this.a.hitFilter,b,a))}};K.prototype.remove=function(){var a=this;Object.keys(this.b).forEach(function(b){a.b[b].h()})};G("eventTracker",K);function L(){this.a={}}function oa(a,b){(a.a.externalSet=a.a.externalSet||[]).push(b)}
L.prototype.G=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];(this.a[a]=this.a[a]||[]).forEach(function(a){return a.apply(null,[].concat(n(c)))})};var M={},N=!1,O;function P(a,b){b=void 0===b?{}:b;this.a={};this.b=a;this.l=b;this.g=null}ea(P,L);function Q(a,b,c){a=["autotrack",a,b].join(":");M[a]||(M[a]=new P(a,c),N||(window.addEventListener("storage",R),N=!0));return M[a]}
function S(){if(null!=O)return O;try{window.localStorage.setItem("autotrack","autotrack"),window.localStorage.removeItem("autotrack"),O=!0}catch(a){O=!1}return O}P.prototype.get=function(){if(this.g)return this.g;if(S())try{this.g=T(window.localStorage.getItem(this.b))}catch(a){}return this.g=C({},this.l,this.g)};P.prototype.set=function(a){this.g=C({},this.l,this.g,a);if(S())try{var b=JSON.stringify(this.g);window.localStorage.setItem(this.b,b)}catch(c){}};
function pa(a){a.g={};if(S())try{window.localStorage.removeItem(a.b)}catch(b){}}P.prototype.h=function(){delete M[this.b];Object.keys(M).length||(window.removeEventListener("storage",R),N=!1)};function R(a){var b=M[a.key];if(b){var c=C({},b.l,T(a.oldValue));a=C({},b.l,T(a.newValue));b.g=a;b.G("externalSet",a,c)}}function T(a){var b={};if(a)try{b=JSON.parse(a)}catch(c){}return b}var U={};
function V(a,b,c){this.f=a;this.timeout=b||qa;this.timeZone=c;this.b=this.b.bind(this);x(a,"sendHitTask",this.b);try{this.c=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(d){}this.a=Q(a.get("trackingId"),"session",{hitTime:0,isExpired:!1});this.a.get().id||this.a.set({id:F()})}function ra(a,b,c){var d=a.get("trackingId");return U[d]?U[d]:U[d]=new V(a,b,c)}
V.prototype.isExpired=function(a){a=void 0===a?this.a.get().id:a;if(a!=this.a.get().id)return!0;a=this.a.get();if(a.isExpired)return!0;var b=a.hitTime;return b&&(a=new Date,b=new Date(b),a-b>6E4*this.timeout||this.c&&this.c.format(a)!=this.c.format(b))?!0:!1};V.prototype.b=function(a){var b=this;return function(c){a(c);var d=c.get("sessionControl");c="start"==d||b.isExpired();var d="end"==d,e=b.a.get();e.hitTime=+new Date;c&&(e.isExpired=!1,e.id=F());d&&(e.isExpired=!0);b.a.set(e)}};
V.prototype.h=function(){A(this.f,"sendHitTask",this.b);this.a.h();delete U[this.f.get("trackingId")]};var qa=30,W=F();
function X(a,b){var c=this;J(a,H.F);document.visibilityState&&(this.a=C({sessionTimeout:qa,visibleThreshold:5E3,sendInitialPageview:!1,fieldsObj:{}},b),this.b=a,this.i=document.visibilityState,this.s=null,this.w=!1,this.o=this.o.bind(this),this.f=this.f.bind(this),this.m=this.m.bind(this),this.u=this.u.bind(this),this.c=Q(a.get("trackingId"),"plugins/page-visibility-tracker"),oa(this.c,this.u),this.j=ra(a,this.a.sessionTimeout,this.a.timeZone),x(a,"set",this.o),window.addEventListener("unload",this.m),
document.addEventListener("visibilitychange",this.f),ma(this.b,function(){if("visible"==document.visibilityState)c.a.sendInitialPageview&&(Y(c,{I:!0}),c.w=!0),c.c.set({time:+new Date,state:"visible",pageId:W,sessionId:c.j.a.get().id});else if(c.a.sendInitialPageview&&c.a.pageLoadsMetricIndex){var a={},a=(a.transport="beacon",a.eventCategory="Page Visibility",a.eventAction="page load",a.eventLabel="(not set)",a["metric"+c.a.pageLoadsMetricIndex]=1,a.nonInteraction=!0,a);c.b.send("event",B(a,c.a.fieldsObj,
c.b,c.a.hitFilter))}}))}
X.prototype.f=function(){var a=this;if("visible"==document.visibilityState||"hidden"==document.visibilityState){var b=sa(this),c={time:+new Date,state:document.visibilityState,pageId:W,sessionId:this.j.a.get().id};"visible"==document.visibilityState&&this.a.sendInitialPageview&&!this.w&&(Y(this),this.w=!0);"hidden"==document.visibilityState&&this.s&&clearTimeout(this.s);this.j.isExpired(b.sessionId)?(pa(this.c),"hidden"==this.i&&"visible"==document.visibilityState&&(clearTimeout(this.s),this.s=setTimeout(function(){a.c.set(c);
Y(a,{hitTime:c.time})},this.a.visibleThreshold))):(b.pageId==W&&"visible"==b.state&&ta(this,b),this.c.set(c));this.i=document.visibilityState}};function sa(a){var b=a.c.get();"visible"==a.i&&"hidden"==b.state&&b.pageId!=W&&(b.state="visible",b.pageId=W,a.c.set(b));return b}
function ta(a,b,c){c=(c?c:{}).hitTime;var d={hitTime:c},d=(d?d:{}).hitTime;(b=b.time?(d||+new Date)-b.time:0)&&b>=a.a.visibleThreshold&&(b=Math.round(b/1E3),d={transport:"beacon",nonInteraction:!0,eventCategory:"Page Visibility",eventAction:"track",eventValue:b,eventLabel:"(not set)"},c&&(d.queueTime=+new Date-c),a.a.visibleMetricIndex&&(d["metric"+a.a.visibleMetricIndex]=b),a.b.send("event",B(d,a.a.fieldsObj,a.b,a.a.hitFilter)))}
function Y(a,b){var c=b?b:{};b=c.hitTime;var c=c.I,d={transport:"beacon"};b&&(d.queueTime=+new Date-b);c&&a.a.pageLoadsMetricIndex&&(d["metric"+a.a.pageLoadsMetricIndex]=1);a.b.send("pageview",B(d,a.a.fieldsObj,a.b,a.a.hitFilter))}X.prototype.o=function(a){var b=this;return function(c,d){var e={},e=E(c)?c:(e[c]=d,e);e.page&&e.page!==b.b.get("page")&&"visible"==b.i&&b.f();a(c,d)}};
X.prototype.u=function(a,b){a.time!=b.time&&(b.pageId!=W||"visible"!=b.state||this.j.isExpired(b.sessionId)||ta(this,b,{hitTime:a.time}))};X.prototype.m=function(){"hidden"!=this.i&&this.f()};X.prototype.remove=function(){this.c.h();this.j.h();A(this.b,"set",this.o);window.removeEventListener("unload",this.m);document.removeEventListener("visibilitychange",this.f)};G("pageVisibilityTracker",X);var ua={};
function Z(a,b){J(a,H.D);window.matchMedia&&(this.a=C({changeTemplate:this.changeTemplate,changeTimeout:1E3,fieldsObj:{}},b),E(this.a.definitions)&&(b=this.a.definitions,this.a.definitions=Array.isArray(b)?b:[b],this.b=a,this.c=[],va(this)))}function va(a){a.a.definitions.forEach(function(b){if(b.name&&b.dimensionIndex){var c=wa(b);a.b.set("dimension"+b.dimensionIndex,c);xa(a,b)}})}function wa(a){var b;a.items.forEach(function(a){ya(a.media).matches&&(b=a)});return b?b.name:"(not set)"}
function xa(a,b){b.items.forEach(function(c){c=ya(c.media);var d=la(function(){var c=wa(b),d=a.b.get("dimension"+b.dimensionIndex);c!==d&&(a.b.set("dimension"+b.dimensionIndex,c),c={transport:"beacon",eventCategory:b.name,eventAction:"change",eventLabel:a.a.changeTemplate(d,c),nonInteraction:!0},a.b.send("event",B(c,a.a.fieldsObj,a.b,a.a.hitFilter)))},a.a.changeTimeout);c.addListener(d);a.c.push({J:c,H:d})})}Z.prototype.remove=function(){for(var a=0,b;b=this.c[a];a++)b.J.removeListener(b.H)};
Z.prototype.changeTemplate=function(a,b){return a+" \x3d\x3e "+b};G("mediaQueryTracker",Z);function ya(a){return ua[a]||(ua[a]=window.matchMedia(a))};})();
//# sourceMappingURL=autotrack.custom.min.js.map